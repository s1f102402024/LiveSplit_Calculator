<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ライブハウス料金分割計算機</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 class="app-title">🎸 LiveSplit Calculator 🎸</h1>
            <button class="help-btn" id="helpBtn">?</button>
        </header>

        <div class="help-modal" id="helpModal">
            <div class="help-content">
                <span class="close-btn" id="closeBtn">&times;</span>
                <h2>使い方</h2>
                <p>このツールは軽音サークルでライブハウスを借りる際の出演料負担割合を計算します。</p>
                <ul>
                    <li><strong>ライブハウスレンタル料:</strong> 総レンタル費用を入力</li>
                    <li><strong>出演者総数:</strong> 全出演者の人数を入力</li>
                    <li><strong>バンド掛け持ち情報:</strong> 複数バンドに出演する人の人数と追加料金率を設定</li>
                    <li><strong>計算結果:</strong> 各カテゴリーの一人当たり負担額が表示されます</li>
                </ul>
                <p><strong>例:</strong> 2つのバンドに出る人は基本料金の110%、3つのバンドに出る人は120%を支払います。</p>
            </div>
        </div>

        <form class="calculator-form" id="calculatorForm">
            <div class="input-group">
                <label for="rentalCost">ライブハウスレンタル料 (円)</label>
                <input type="number" id="rentalCost" name="rentalCost" placeholder="例: 150000" required>
                <span class="error-message" id="rentalCostError"></span>
            </div>

            <div class="input-group">
                <label for="totalPerformers">出演者総数 (人)</label>
                <input type="number" id="totalPerformers" name="totalPerformers" placeholder="例: 50" required>
                <span class="error-message" id="totalPerformersError"></span>
            </div>

            <div class="band-groups">
                <div class="band-groups-header">
                    <h3>バンド掛け持ち設定</h3>
                    <button type="button" class="add-band-btn" id="addBandBtn">
                        <span class="plus-icon">+</span>
                        項目を追加
                    </button>
                </div>
                
                <div id="bandGroupsContainer">
                    <!-- Dynamic band groups will be added here -->
                </div>
            </div>

            <button type="submit" class="calculate-btn">
                <span class="btn-text">計算する</span>
                <div class="loading-spinner" id="loadingSpinner"></div>
            </button>
        </form>

        <div class="results" id="results">
            <h3>計算結果</h3>
            <div class="result-grid" id="resultGrid">
                <!-- Results will be populated here -->
            </div>
            <button type="button" class="cleanup-btn" id="cleanupBtn" style="display: none;">
                <span class="cleanup-icon">✨</span>
                結果をクリーンアップ
            </button>
            <div class="cleaned-results" id="cleanedResults" style="display: none;">
                <h3>クリーンアップ済み結果</h3>
                <div class="result-grid" id="cleanedResultGrid">
                    <!-- Cleaned results will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
